---
title: '视频生成'
api: 'POST https://llm.ai-nebula.com/v1/video/generations'
---

## 简介

视频生成接口支持文生视频、图生视频、视频生视频等多种功能。通过统一的API接口，您可以调用Sora 2、Veo、阿里万相、豆包 Seedance 等多个主流视频生成模型。

**重要提示**：视频生成是异步任务，需要先提交任务获取任务ID，然后轮询查询任务状态直到成功。

## 支持的模型及功能

| 模型系列 | 模型名称 | 支持功能 |
|---------|---------|---------|
| **Sora 2** | `sora-2` | 文生视频、图生视频、视频生视频（Remix 模式） |
| **谷歌 Veo** | `veo-3.0-fast-generate-001` | 文生视频（首帧模式） |
| | `veo-3.1-fast-generate-preview` | 文生视频（首帧模式、首尾帧模式） |
| **阿里万相** | `wan2.5-t2v-preview` | 文生视频 |
| | `wan2.5-i2v-preview` | 图生视频（首帧模式） |
| **豆包 Seedance** | `doubao-seedance-1-0-lite-t2v-250428` | 文生视频 |
| | `doubao-seedance-1-0-lite-i2v-250428` | 图生视频（首帧模式、首尾帧模式、参考图模式） |
| | `doubao-seedance-1-0-pro-250528` | 文生视频（首帧模式） |

**功能说明**：
- **文生视频（T2V）**：仅通过文本提示词生成视频
- **图生视频（I2V）**：基于参考图片生成视频
  - **首帧模式**：使用首帧图片作为起始画面
  - **首尾帧模式**：使用首帧和尾帧图片控制视频起止画面
  - **参考图模式**：使用参考图片作为风格参考（仅部分模型支持）
- **视频生视频（Remix）**：基于已有视频重新生成（仅 Sora 2 支持）

## 认证

<ParamField header="Authorization" type="string" required>
  Bearer Token，如 `Bearer sk-xxxxxxxxxx`
</ParamField>

## 请求参数

<ParamField body="model" type="string" required>
  模型标识，支持的模型及功能如下：

  **Sora 2 系列**：
  - `sora-2` - 支持文生视频、图生视频、视频生视频（Remix 模式）

  **谷歌 Veo 系列**：
  - `veo-3.0-fast-generate-001` - 文生视频（首帧模式）
  - `veo-3.1-fast-generate-preview` - 文生视频（首帧模式、首尾帧模式）

  **阿里万相系列**：
  - `wan2.5-t2v-preview` - 文生视频
  - `wan2.5-i2v-preview` - 图生视频（首帧模式）

  **豆包 Seedance 系列**：
  - `doubao-seedance-1-0-lite-t2v-250428` - 文生视频
  - `doubao-seedance-1-0-lite-i2v-250428` - 图生视频（首帧模式、首尾帧模式、参考图模式）
  - `doubao-seedance-1-0-pro-250528` - 文生视频（首帧模式）
</ParamField>

<ParamField body="prompt" type="string" required>
  视频生成提示词，描述画面动作和场景
</ParamField>

<ParamField body="image" type="string">
  图生视频时的参考图片（支持 Base64 或 URL 格式）
</ParamField>

<ParamField body="duration" type="integer" default="5">
  视频时长（秒），不同模型支持不同时长
</ParamField>

<ParamField body="resolution" type="string" default="720p">
  视频分辨率：`480p`、`720p`、`1080p`、`4k`
</ParamField>

<ParamField body="aspect_ratio" type="string" default="16:9">
  宽高比：`16:9`、`9:16`、`1:1`、`4:3`、`3:4`、`21:9`、`adaptive`（自适应，仅部分模型支持）
</ParamField>

## 模型专用参数

不同模型支持不同的专用参数，以下按模型系列分类说明：

<Tabs>
  <Tab title="Sora 2">
<ParamField body="seconds" type="string|integer" default="4">
  视频时长（秒），支持：`4`、`8`、`12`
</ParamField>
<ParamField body="size" type="string" default="720x1280">
  视频分辨率，支持：`720x1280`（竖屏）、`1280x720`（横屏）
</ParamField>
<ParamField body="input_reference" type="string">
  参考图片（支持 URL 或 Base64 格式），用于图生视频
</ParamField>
<ParamField body="remix_from_video_id" type="string">
  Remix 模式：基于已有视频ID重新生成（必须以 `video_` 开头）
</ParamField>
  </Tab>
  
  <Tab title="Veo">
<ParamField body="durationSeconds" type="integer" default="4">
  视频时长（秒），支持：`4`、`6`、`8`
</ParamField>
<ParamField body="aspectRatio" type="string" default="16:9">
  宽高比，仅支持：`16:9`、`9:16`
</ParamField>
<ParamField body="resolution" type="string" default="1080p">
  分辨率，支持：`720p`、`1080p`
</ParamField>
<ParamField body="fps" type="integer" default="24">
  帧率，默认 24
</ParamField>
<ParamField body="image" type="string">
  首帧参考图（支持 URL 或 Base64 格式）
</ParamField>
<ParamField body="lastFrame" type="string">
  尾帧参考图（支持 URL 或 Base64 格式），仅 `veo-3.1` 系列支持
</ParamField>
<ParamField body="generateAudio" type="boolean" default="false">
  是否生成同步音频。快速版模型会忽略该参数并始终包含音频
</ParamField>
<ParamField body="personGeneration" type="string" default="allow_all">
  人像生成策略：`allow_all`（所有年龄）、`allow_adult`（成年人）、`dont_allow`（禁止人像）
</ParamField>
<ParamField body="addWatermark" type="boolean" default="false">
  是否添加水印
</ParamField>
<ParamField body="seed" type="integer">
  随机种子，用于复现结果
</ParamField>
<ParamField body="sampleCount" type="integer" default="1">
  每次生成的视频数量，范围：`1-4`
</ParamField>
  </Tab>
  
  <Tab title="阿里万相">
<ParamField body="duration" type="integer" default="5">
  视频时长（秒），支持：`5`、`10`
</ParamField>
<ParamField body="resolution" type="string" default="720p">
  视频分辨率，支持：`480p`、`720p`、`1080p`
</ParamField>
<ParamField body="size" type="string">
  视频尺寸（仅 t2v 模式），格式：`宽度*高度`，如 `1280*720`
</ParamField>
<ParamField body="smart_rewrite" type="boolean" default="false">
  是否启用智能提示词扩写
</ParamField>
<ParamField body="generate_audio" type="boolean" default="false">
  是否生成与画面同步的音频
</ParamField>
<ParamField body="audio_url" type="string">
  自定义音频文件URL（HTTPS格式）
</ParamField>
<ParamField body="seed" type="integer">
  随机种子，范围：`0-2147483647`
</ParamField>
  </Tab>
  
  <Tab title="豆包 Seedance">
<ParamField body="metadata" type="object">
  豆包模型使用 `metadata.content` 数组传递内容，支持文本和图片混合输入。参数通过文本提示词中的特殊标记控制：
  - `--rs` 或 `--resolution`：分辨率（`480p`、`720p`、`1080p`）
  - `--ratio`：宽高比（`16:9`、`9:16`、`1:1`、`4:3`、`3:4`、`adaptive`）
  - `--dur` 或 `--duration`：时长（秒，如 `5`、`10`）
  - `--fps` 或 `--framespersecond`：帧率（如 `24`、`30`）
  - `--seed`：随机种子
  - `--wm` 或 `--watermark`：水印开关（`true`、`false`）
  - `--cf` 或 `--camerafixed`：固定摄像头（`true`、`false`，仅 lite 模型支持）
</ParamField>
<ParamField body="image" type="string">
  参考图片（支持 URL 或 Base64 格式）。在 `metadata.content` 中，图片可通过 `role` 字段标记：
  - `first_frame`：首帧图片
  - `last_frame`：尾帧图片（仅部分模型支持）
  - `reference_image`：参考图（仅 `doubao-seedance-1-0-lite-i2v-250428` 支持）
</ParamField>
<ParamField body="callback_url" type="string">
  回调通知URL（可选），任务状态变更时自动推送结果
</ParamField>
  </Tab>
</Tabs>

## 完整示例

<Tabs>
  <Tab title="Sora 2 完整示例">
    ### 1. 提交视频生成任务
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "sora-2",
        "prompt": "一只可爱的小猫在花园里玩耍，阳光明媚，画面温馨",
        "seconds": "4",
        "size": "720x1280"
      }'
    ```
    
    **响应示例**：
    ```json
    {
      "task_id": "video_69095b4ce0048190893a01510c0c98b0",
      "status": "submitted",
      "format": "mp4"
    }
    ```
    
    ### 2. 轮询查询任务状态
    
    ```bash
    curl -X GET "https://llm.ai-nebula.com/v1/video/generations/video_69095b4ce0048190893a01510c0c98b0" \
      -H "Authorization: Bearer sk-xxxxxxxxxx"
    ```
    
    **任务状态说明**：
    
    | 状态 | 说明 | 建议操作 |
    |------|------|----------|
    | `queued` | 任务已排队，等待处理 | 继续轮询 |
    | `in_progress` | 任务正在处理中 | 继续轮询 |
    | `succeeded` | 任务成功完成 | 下载视频 |
    | `failed` | 任务失败 | 查看失败原因 |
    
    **响应示例（排队中）**：
    ```json
    {
      "task_id": "video_69095b4ce0048190893a01510c0c98b0",
      "status": "queued",
      "format": "mp4"
    }
    ```
    
    **响应示例（处理中）**：
    ```json
    {
      "task_id": "video_69095b4ce0048190893a01510c0c98b0",
      "status": "in_progress",
      "format": "mp4"
    }
    ```
    
    **响应示例（已完成）**：
    ```json
    {
      "task_id": "video_69095b4ce0048190893a01510c0c98b0",
      "status": "succeeded",
      "format": "mp4"
    }
    ```
    
    **响应示例（失败）**：
    ```json
    {
      "task_id": "video_69095b4ce0048190893a01510c0c98b0",
      "status": "failed",
      "format": "mp4",
      "error": {
        "code": 400,
        "message": "提示词包含不当内容"
      }
    }
    ```
    
    **重要提示**：
    - 任务状态为 `queued` 或 `in_progress` 时，需要定期轮询（建议每 3-5 秒查询一次）
    - 当状态变为 `succeeded` 时，可以使用 `task_id` 作为 `videoId` 去下载视频
    - 当状态变为 `failed` 时，可以查看 `error` 字段了解失败原因
    
    ### 3. 下载视频（Sora 2 特有）
    
    使用轮询成功后返回的 `task_id`（作为 `videoId`）下载视频：
    
    ```bash
    curl -X GET "https://llm.ai-nebula.com/v1/video/generations/download?id=video_69095b4ce0048190893a01510c0c98b0" \
      -H "Authorization: Bearer sk-xxxxxxxxxx"
    ```
    
    **注意**：`id` 参数的值就是步骤 2 中轮询成功后返回的 `task_id`。
    
    **响应示例**：
    ```json
    {
      "success": true,
      "generation_id": "video_69095b4ce0048190893a01510c0c98b0",
      "task_id": "video_69095b4ce0048190893a01510c0c98b0",
      "format": "mp4",
      "size": 15728640,
      "base64": "AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAB...",
      "data_url": "data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAB..."
    }
    ```
    
    **响应字段说明**：
    
    | 字段名 | 类型 | 说明 |
    |--------|------|------|
    | `success` | boolean | 是否成功 |
    | `generation_id` | string | 生成ID（与 videoId 相同） |
    | `task_id` | string | 任务ID |
    | `format` | string | 视频格式（固定为 `"mp4"`） |
    | `size` | number | 视频文件大小（字节） |
    | `base64` | string | Base64 编码的视频数据 |
    | `data_url` | string | Data URL 格式的视频数据，可直接用于前端 `<video>` 标签 |
  </Tab>
  
  <Tab title="Veo 完整示例">
    ### 1. 提交视频生成任务
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "veo-3.1-generate-preview",
        "prompt": "科幻城市的清晨航拍，阳光穿过云层",
        "durationSeconds": 8,
        "aspectRatio": "16:9",
        "resolution": "1080p",
        "generateAudio": true,
        "image": "https://example.com/start-frame.png",
        "lastFrame": "https://example.com/end-frame.png"
      }'
    ```
    
    **响应示例**：
    ```json
    {
      "task_id": "video_1234567890abcdef",
      "status": "submitted",
      "format": "mp4"
    }
    ```
    
    ### 2. 轮询查询任务状态
    
    ```bash
    curl -X GET "https://llm.ai-nebula.com/v1/video/generations/video_1234567890abcdef" \
      -H "Authorization: Bearer sk-xxxxxxxxxx"
    ```
    
    **响应示例（已完成）**：
    ```json
    {
      "task_id": "video_1234567890abcdef",
      "status": "succeeded",
      "format": "mp4",
      "url": "https://nebula-ads.oss-cn-guangzhou.aliyuncs.com/2025/11/18/abc123/veo-demo-1.mp4"
    }
    ```
    
    **注意**：Veo 和阿里万相在任务成功后，视频URL直接包含在响应中，无需额外下载步骤。
  </Tab>
  
  <Tab title="阿里万相完整示例">
    ### 1. 提交视频生成任务
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "wan2.5-i2v-preview",
        "prompt": "小猫缓缓睁开眼睛，耳朵轻轻抖动，镜头缓推拉近",
        "image": "https://example.com/cat.jpg",
        "duration": 5,
        "resolution": "720p",
        "smart_rewrite": true,
        "generate_audio": true
      }'
    ```
    
    **响应示例**：
    ```json
    {
      "task_id": "ae8eb420-8aa6-440a-8eb8-1d1afe8d5e97",
      "status": "submitted",
      "format": "mp4"
    }
    ```
    
    ### 2. 轮询查询任务状态
    
    ```bash
    curl -X GET "https://llm.ai-nebula.com/v1/video/generations/ae8eb420-8aa6-440a-8eb8-1d1afe8d5e97" \
      -H "Authorization: Bearer sk-xxxxxxxxxx"
    ```
    
    **响应示例（已完成）**：
    ```json
    {
      "task_id": "ae8eb420-8aa6-440a-8eb8-1d1afe8d5e97",
      "status": "succeeded",
      "format": "mp4",
      "url": "https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/.../video.mp4?Expires=..."
    }
    ```
  </Tab>
  
  <Tab title="豆包 Seedance 完整示例">
    ### 1. 文生视频（T2V）
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "doubao-seedance-1-0-pro-250528",
        "prompt": "多个镜头。一名侦探进入一间光线昏暗的房间。他检查桌上的线索，手里拿起桌上的某个物品。镜头转向他正在思索。 --ratio 16:9 --dur 5",
        "metadata": {
          "content": [
            {
              "type": "text",
              "text": "多个镜头。一名侦探进入一间光线昏暗的房间。他检查桌上的线索，手里拿起桌上的某个物品。镜头转向他正在思索。 --ratio 16:9 --dur 5"
            }
          ]
        }
      }'
    ```
    
    ### 2. 图生视频-首帧模式（I2V）
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "doubao-seedance-1-0-pro-250528",
        "prompt": "女孩抱着狐狸，女孩睁开眼，温柔地看向镜头，狐狸友善地抱着，镜头缓缓拉出，女孩的头发被风吹动 --ratio adaptive --dur 5",
        "metadata": {
          "content": [
            {
              "type": "text",
              "text": "女孩抱着狐狸，女孩睁开眼，温柔地看向镜头，狐狸友善地抱着，镜头缓缓拉出，女孩的头发被风吹动 --ratio adaptive --dur 5"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/first-frame.png"
              }
            }
          ]
        }
      }'
    ```
    
    ### 3. 图生视频-首尾帧模式（仅 lite-i2v 支持）
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "doubao-seedance-1-0-lite-i2v-250428",
        "prompt": "一只蓝绿精卫鸟变成人形 --rs 720p --dur 5 --cf false",
        "metadata": {
          "content": [
            {
              "type": "text",
              "text": "一只蓝绿精卫鸟变成人形 --rs 720p --dur 5 --cf false"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/first-frame.png"
              },
              "role": "first_frame"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/last-frame.png"
              },
              "role": "last_frame"
            }
          ]
        }
      }'
    ```
    
    ### 4. 图生视频-参考图模式（仅 lite-i2v 支持）
    
    ```bash
    curl -X POST "https://llm.ai-nebula.com/v1/video/generations" \
      -H "Authorization: Bearer sk-xxxxxxxxxx" \
      -H "Content-Type: application/json" \
      -d '{
        "model": "doubao-seedance-1-0-lite-i2v-250428",
        "prompt": "[图1]戴着眼镜穿着蓝色T恤的男生和[图2]的柯基小狗，坐在[图3]的草坪上，3D卡通风格",
        "metadata": {
          "content": [
            {
              "type": "text",
              "text": "[图1]戴着眼镜穿着蓝色T恤的男生和[图2]的柯基小狗，坐在[图3]的草坪上，3D卡通风格"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/ref1.png"
              },
              "role": "reference_image"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/ref2.png"
              },
              "role": "reference_image"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "https://example.com/ref3.png"
              },
              "role": "reference_image"
            }
          ]
        }
      }'
    ```
    
    **响应示例**：
    ```json
    {
      "task_id": "cgt-2025123456-abcd",
      "status": "submitted",
      "format": "mp4"
    }
    ```
    
    ### 5. 轮询查询任务状态
    
    ```bash
    curl -X GET "https://llm.ai-nebula.com/v1/video/generations/cgt-2025123456-abcd" \
      -H "Authorization: Bearer sk-xxxxxxxxxx"
    ```
    
    **响应示例（已完成）**：
    ```json
    {
      "task_id": "cgt-2025123456-abcd",
      "status": "succeeded",
      "format": "mp4",
      "url": "https://ark-content-generation-cn-beijing.tos-cn-beijing.volces.com/.../video.mp4?X-Tos-Algorithm=..."
    }
    ```
  </Tab>
</Tabs>

## 支持的模型

### Sora 2 系列

**模型名称**: `sora-2`

**核心能力**:
- ✅ 文生视频（纯文本描述生成视频）
- ✅ 图生视频（单图片+文本生成视频）
- ✅ Remix 模式（基于已有视频重新生成）

**支持参数**:
- `seconds`: 视频时长（4、8、12秒），默认 4 秒
- `size`: 视频分辨率（`720x1280` 竖屏、`1280x720` 横屏），默认 `720x1280`
- `width` / `height`: 视频宽度和高度（会自动转换为 `size` 参数）
- `input_reference`: 参考图片（支持 URL 或 Base64 格式），用于图生视频
- `remix_from_video_id`: Remix 模式，基于已有视频ID重新生成（必须以 `video_` 开头）

**注意事项**:
- 视频生成是异步任务，需要先提交任务获取 `task_id`，然后轮询查询任务状态
- 当任务状态为 `succeeded` 时，使用 `task_id` 作为 `videoId` 调用下载接口获取视频
- 下载接口返回 Base64 编码的视频数据，可直接用于前端播放或保存为文件
- 图片输入格式支持 JPEG、PNG，图生视频时图片尺寸必须与 `size` 参数完全匹配

### Veo 系列

**模型名称**: `veo-3.1-generate-preview`、`veo-3.1-fast-generate-preview`、`veo-3.0-generate-preview`、`veo-3.0-fast-generate-001`

**核心能力**:
- ✅ 文生视频
- ✅ 图生视频（支持首帧和尾帧约束）
- ✅ 音频生成

**支持参数**:
- `durationSeconds`: 视频时长（4、6、8秒）
- `aspectRatio`: 宽高比（16:9、9:16）
- `resolution`: 分辨率（720p、1080p）
- `generateAudio`: 是否生成音频
- `image`: 首帧参考图
- `lastFrame`: 尾帧参考图
- `seed`: 随机种子



### 阿里万相系列

**模型名称**: `wan2.5-i2v-preview`

**核心能力**:
- ✅ 图生视频（Image-to-Video）
- ✅ 支持自定义音频上传
- ✅ 智能提示词扩写
- ✅ 自动生成画面同步音频

**支持参数**:
- `duration`: 视频时长（5、10秒）
- `resolution`: 视频分辨率（480p、720p、1080p）
- `smart_rewrite`: 是否启用智能提示词扩写
- `generate_audio`: 是否生成与画面同步的音频
- `audio_url`: 自定义音频文件URL
- `seed`: 随机种子

### 豆包 Seedance 系列

**模型名称**:
- `doubao-seedance-1-0-pro-250528` - 专业版，支持文生视频和图生视频（首帧模式）
- `doubao-seedance-1-0-lite-t2v-250428` - 轻量版文生视频
- `doubao-seedance-1-0-lite-i2v-250428` - 轻量版图生视频，支持首帧、首尾帧、参考图三种模式
- `doubao-seaweed-1-0-t2v-250428` - 海草版文生视频
- `wan2-1-14b-i2v-250417` - 万象版图生视频
- `wan2-1-14b-flf2v-250417` - 万象版首尾帧生成

**核心能力**:
- ✅ 文生视频（T2V）
- ✅ 图生视频-首帧模式（I2V）
- ✅ 图生视频-首尾帧模式（仅 `doubao-seedance-1-0-lite-i2v-250428` 和 `wan2-1-14b-flf2v-250417` 支持）
- ✅ 图生视频-参考图模式（仅 `doubao-seedance-1-0-lite-i2v-250428` 支持）

**支持参数**（通过文本提示词中的标记控制）:
- `--rs` / `--resolution`: 分辨率（`480p`、`720p`、`1080p`）
- `--ratio`: 宽高比（`16:9`、`9:16`、`1:1`、`4:3`、`3:4`、`adaptive`）
- `--dur` / `--duration`: 时长（秒，如 `5`、`10`）
- `--fps` / `--framespersecond`: 帧率（如 `24`、`30`）
- `--seed`: 随机种子
- `--wm` / `--watermark`: 水印开关（`true`、`false`）
- `--cf` / `--camerafixed`: 固定摄像头（`true`、`false`，仅 lite 模型支持）

**图片输入格式**:
- 在 `metadata.content` 数组中，图片项可通过 `role` 字段标记：
  - `first_frame`: 首帧图片
  - `last_frame`: 尾帧图片
  - `reference_image`: 参考图（在提示词中使用 `[图N]` 引用）

**注意事项**:
- `doubao-seedance-1-0-lite-t2v-250428` 仅支持文生视频，不支持图片输入
- `doubao-seedance-1-0-lite-i2v-250428` 的参考图模式不支持 `1080p` 分辨率
- `doubao-seedance-1-0-lite-t2v-250428` 不支持 `adaptive` 宽高比



## 最佳实践

### 轮询策略

<Tabs>
  <Tab title="Python 轮询示例">
    ```python
    import requests
    import time
    
    def poll_task_status(task_id, api_key, max_wait_time=300):
        """轮询任务状态直到完成"""
        url = f"https://llm.ai-nebula.com/v1/video/generations/{task_id}"
        headers = {"Authorization": f"Bearer {api_key}"}
        
        start_time = time.time()
        while True:
            response = requests.get(url, headers=headers)
            data = response.json()
            status = data.get("status")
            
            print(f"当前状态: {status}")
            
            if status == "succeeded":
                video_url = data.get("url")
                print(f"✅ 任务完成！视频URL: {video_url}")
                return video_url
            elif status == "failed":
                error_msg = data.get("metadata", {}).get("output", {}).get("message", "未知错误")
                print(f"❌ 任务失败: {error_msg}")
                return None
            
            # 检查超时
            if time.time() - start_time > max_wait_time:
                print("⏰ 等待超时")
                return None
            
            # 等待5秒后再次查询
            time.sleep(5)
    ```
  </Tab>
  
  <Tab title="JavaScript 轮询示例">
    ```javascript
    async function pollTaskStatus(taskId, apiKey, maxWaitTime = 300000) {
      const url = `https://llm.ai-nebula.com/v1/video/generations/${taskId}`;
      const headers = { 'Authorization': `Bearer ${apiKey}` };
      
      const startTime = Date.now();
      
      while (true) {
        const response = await fetch(url, { headers });
        const data = await response.json();
        const status = data.status;
        
        console.log(`当前状态: ${status}`);
        
        if (status === 'succeeded') {
          const videoUrl = data.url;
          console.log(`✅ 任务完成！视频URL: ${videoUrl}`);
          return videoUrl;
        } else if (status === 'failed') {
          const errorMsg = data.metadata?.output?.message || '未知错误';
          console.error(`❌ 任务失败: ${errorMsg}`);
          throw new Error(errorMsg);
        }
        
        // 检查超时
        if (Date.now() - startTime > maxWaitTime) {
          throw new Error('等待超时');
        }
        
        // 等待5秒后再次查询
        await new Promise(resolve => setTimeout(resolve, 5000));
      }
    }
    ```
  </Tab>
</Tabs>

## 常见问题

<Tabs>
  <Tab title="通用问题">
    <AccordionGroup>
      <Accordion title="视频生成需要多长时间？">
        通常需要 1-5 分钟，具体取决于视频时长、分辨率和服务器负载。
      </Accordion>
      
      <Accordion title="生成的视频有效期是多久？">
        视频URL的有效期约为24小时。建议在收到响应后立即下载保存。
      </Accordion>
      
      <Accordion title="支持哪些图片输入格式？">
        支持 PNG、JPEG、JPG、WEBP 格式，最大文件大小 10MB。
      </Accordion>
    </AccordionGroup>
  </Tab>
  
  <Tab title="Sora 2">
    <AccordionGroup>
      <Accordion title="为什么Sora 2需要额外下载步骤？">
        Sora 2 的视频文件存储在独立的存储服务中，任务成功后返回的是带签名的临时URL，需要额外下载。
      </Accordion>
      
      <Accordion title="支持哪些视频时长？">
        支持 4秒、8秒、12秒三种时长。
      </Accordion>
    </AccordionGroup>
  </Tab>
  
  <Tab title="Veo">
    <AccordionGroup>
      <Accordion title="支持哪些视频时长？">
        支持 4秒、6秒、8秒三种时长。
      </Accordion>
      
      <Accordion title="如何生成音频？">
        设置 `generateAudio: true` 参数，系统会自动生成与画面同步的音频。
      </Accordion>
    </AccordionGroup>
  </Tab>
  
  <Tab title="阿里万相">
    <AccordionGroup>
      <Accordion title="支持哪些视频时长？">
        支持 5秒 和 10秒 两种时长。
      </Accordion>
      
      <Accordion title="如何上传自定义音频？">
        提供 `audio_url` 参数，指向可公开访问的音频文件URL。
      </Accordion>
    </AccordionGroup>
  </Tab>
  
  <Tab title="豆包 Seedance">
    <AccordionGroup>
      <Accordion title="如何设置视频参数？">
        豆包 Seedance 模型的参数通过文本提示词中的特殊标记控制，例如：
        `--rs 720p --ratio 16:9 --dur 5 --fps 24 --seed 12345`
      </Accordion>
      
      <Accordion title="支持哪些图生视频模式？">
        - **首帧模式**：所有支持图生视频的模型都支持
        - **首尾帧模式**：仅 `doubao-seedance-1-0-lite-i2v-250428` 和 `wan2-1-14b-flf2v-250417` 支持
        - **参考图模式**：仅 `doubao-seedance-1-0-lite-i2v-250428` 支持，可在提示词中使用 `[图1]`、`[图2]` 等引用多张参考图
      </Accordion>
      
      <Accordion title="如何配置回调通知？">
        在 `metadata` 中设置 `callback_url` 字段，任务状态变更时会自动推送结果到该URL。
      </Accordion>
      
      <Accordion title="支持哪些宽高比？">
        大部分模型支持 `16:9`、`9:16`、`1:1`、`4:3`、`3:4`、`adaptive`（自适应）。注意 `doubao-seedance-1-0-lite-t2v-250428` 不支持 `adaptive`。
      </Accordion>
    </AccordionGroup>
  </Tab>
</Tabs>

## 相关资源

<Columns cols={2}>
  <Card title="图片生成" icon="image" href="/cn/api-reference/endpoint/image-generation">
    查看图片生成接口文档
  </Card>
  <Card title="模型列表" icon="list" href="/cn/api-reference/models">
    查看所有支持的模型信息
  </Card>
</Columns>

